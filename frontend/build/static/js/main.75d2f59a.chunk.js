(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(33),o=n.n(s),a=(n(39),n(10)),i=n(11),u=n(13),j=n(12),l=(n.p,n(40),n(0)),h=function(e){var t=e.user;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.username}),Object(l.jsx)("td",{children:t.first_name}),Object(l.jsx)("td",{children:t.last_name}),Object(l.jsx)("td",{children:t.email})]})},d=function(e){var t=e.users;return Object(l.jsx)("div",{className:"card-body",children:Object(l.jsxs)("table",{className:"form-range",children:[Object(l.jsx)("th",{children:"Username"}),Object(l.jsx)("th",{children:"First name"}),Object(l.jsx)("th",{children:"Last name"}),Object(l.jsx)("th",{children:"Email"}),t.map((function(e){return Object(l.jsx)(h,{user:e},e.id)}))]})})},b=n(9),p=n.n(b),O=n(24),f=n(4),x=function(e){e.footer;return Object(l.jsx)("footer",{className:"carousel-indicators",children:Object(l.jsx)("h2",{className:"display-3",children:"Footer"})})},m=(n(68),n(2)),g=function(e){var t=e.project,n=e.deleteProjects;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:Object(l.jsx)(f.b,{to:"/projects/".concat(t.id),children:t.name})}),Object(l.jsx)("td",{children:t.repo_url}),Object(l.jsx)("td",{children:t.users}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{onClick:function(){return n(t.id)},type:"button",children:"Delete"})})]})},v=function(e){var t=e.projects,n=e.deleteProjects;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("table",{className:"form-range",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"Project"}),Object(l.jsx)("th",{children:"URL"}),Object(l.jsx)("th",{children:"Users"}),Object(l.jsx)("th",{children:"Delete"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsx)(g,{project:e,deleteProjects:n})}))})]}),Object(l.jsx)(f.b,{to:"/projects/create",children:"Create"})]})},k=function(e){var t=e.todo,n=e.deleteTodo;return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:t.user}),Object(l.jsx)("td",{children:t.description}),Object(l.jsx)("td",{children:t.project}),Object(l.jsx)("td",{children:Object(l.jsx)("button",{type:"button",onClick:function(){return n(t.id)},children:"Delete"})})]})},y=function(e){var t=e.todos,n=e.deleteTodo;return Object(l.jsxs)("div",{children:[Object(l.jsxs)("table",{className:"form-range",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{children:[Object(l.jsx)("th",{children:"User"}),Object(l.jsx)("th",{children:"Description"}),Object(l.jsx)("th",{children:"Project"}),Object(l.jsx)("th",{children:"Delete"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e){return Object(l.jsx)(k,{todo:e,deleteTodo:n})}))})]}),Object(l.jsx)(f.b,{to:"/todo/create",children:"Create"})]})},_=n(15),C=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={login:"",password:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(_.a)({},e.target.name,e.target.value)),console.log([e.target.name],e.target.value)}},{key:"handleSubmit",value:function(e){this.props.get_token(this.state.login,this.state.password),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(l.jsx)("input",{type:"text",name:"login",placeholder:"login",value:this.state.login,onChange:function(t){return e.handleChange(t)}}),Object(l.jsx)("input",{type:"password",name:"password",placeholder:"password",value:this.state.password,onChange:function(t){return e.handleChange(t)}}),Object(l.jsx)("input",{type:"submit",value:"Login"})]})}}]),n}(r.a.Component),S=function(e){var t=e.location;return Object(l.jsx)("div",{children:Object(l.jsxs)("h2",{children:[" \u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043f\u043e \u0430\u0434\u0440\u0435\u0441\u0443 '",t.pathname,"' \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"]})})},P=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={name:"",users:[]},c}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(_.a)({},e.target.name,e.target.value))}},{key:"handleProjectChange",value:function(e){if(e.target.selectedOptions){for(var t=[],n=0;n<e.target.selectedOptions.length;n++)t.push(e.target.selectedOptions.item(n).value);this.setState({users:t})}else this.setState({users:[]})}},{key:"handleSubmit",value:function(e){this.props.createProject(this.state.name,this.state.users),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"login",children:"name"}),Object(l.jsx)("input",{type:"text",name:"name",value:this.state.name,onChange:function(t){return e.handleChange(t)}})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"author",children:"user"}),Object(l.jsx)("select",{name:"users",multiple:!0,onChange:function(t){return e.handleProjectChange(t)},children:this.props.users.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.first_name})}))})]}),Object(l.jsx)("input",{type:"submit",value:"Save"})]})}}]),n}(r.a.Component),T=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={user:e.users.id,project:e.projects.id,description:""},c}return Object(i.a)(n,[{key:"handleChange",value:function(e){this.setState(Object(_.a)({},e.target.name,e.target.value)),console.log([e.target.name],e.target.value)}},{key:"handleSubmit",value:function(e){this.props.createTodo(this.state.user,this.state.project,this.state.description),e.preventDefault()}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("form",{onSubmit:function(t){return e.handleSubmit(t)},children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"login",children:"Text"}),Object(l.jsx)("input",{type:"text",className:"form-control",name:"description",value:this.state.description,onChange:function(t){return e.handleChange(t)}})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{htmlFor:"author",children:"user/project"}),Object(l.jsx)("select",{name:"user",onChange:function(t){return e.handleChange(t)},children:this.props.users.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.username})}))}),Object(l.jsx)("select",{name:"project",onChange:function(t){return e.handleChange(t)},children:this.props.projects.map((function(e){return Object(l.jsx)("option",{value:e.id,children:e.name})}))})]}),Object(l.jsx)("input",{type:"submit",className:"btn btn-primary",value:"Save"})]})}}]),n}(r.a.Component),N=function(e){Object(u.a)(n,e);var t=Object(j.a)(n);function n(e){var c;return Object(a.a)(this,n),(c=t.call(this,e)).state={users:[],projects:[],todos:[],token:""},c}return Object(i.a)(n,[{key:"createProject",value:function(e,t){var n=this;console.log(e+" "+t);var c=this.get_headers(),r={name:e,users:t};p.a.post("http://127.0.0.1:8000/api/projects/",r,{headers:c}).then((function(e){n.load_data()})).catch((function(e){console.log(e),n.setState({users:[]})}))}},{key:"createTodo",value:function(e,t,n){var c=this,r=this.get_headers(),s={user:e,project:t,description:n};console.log(s),p.a.post("http://127.0.0.1:8000/api/todo/",s,{headers:r}).then((function(e){c.load_data()})).catch((function(e){return console.log(e)}))}},{key:"deleteProjects",value:function(e){var t=this,n=this.get_headers();p.a.delete("http://127.0.0.1:8000/api/projects/".concat(e),{headers:n}).then((function(e){t.load_data()})).catch((function(e){console.log(e),t.setState({projects:[]})}))}},{key:"deleteTodo",value:function(e){var t=this,n=this.get_headers();console.log(e),p.a.delete("http://127.0.0.1:8000/api/todo/".concat(e),{headers:n}).then((function(n){t.setState({todos:t.state.todos.filter((function(t){return t.id!==e}))})})).catch((function(e){return console.log(e)}))}},{key:"load_data",value:function(){var e=this,t=this.get_headers();p.a.get("http://127.0.0.1:8000/api/users/",{headers:t}).then((function(t){var n=t.data;e.setState({users:n})})).catch((function(t){console.log(t),e.setState({users:[]})})),p.a.get("http://127.0.0.1:8000/api/projects/",{headers:t}).then((function(t){var n=t.data;e.setState({projects:n})})).catch((function(t){console.log(t),e.setState({projects:[]})})),p.a.get("http://127.0.0.1:8000/api/todo/",{headers:t}).then((function(t){var n=t.data;e.setState({todos:n})})).catch((function(t){console.log(t),e.setState({todos:[]})}))}},{key:"is_auth",value:function(){return!!this.state.token}},{key:"logout",value:function(){this.set_token("")}},{key:"set_token",value:function(e){var t=this;(new O.a).set("token",e),this.setState({token:e},(function(){return t.load_data()}))}},{key:"get_token",value:function(e,t){var n=this;p.a.post("http://127.0.0.1:8000/api-auth-token/",{username:e,password:t}).then((function(e){n.set_token(e.data.token)})).catch((function(e){return alert("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c")}))}},{key:"get_headers",value:function(){var e={"Content-Type":"application/json"};return this.is_auth()&&(e.Authorization="Token "+this.state.token),e}},{key:"get_token_from_storage",value:function(){var e=this,t=(new O.a).get("token");this.setState({token:t},(function(){return e.load_data()}))}},{key:"componentDidMount",value:function(){this.get_token_from_storage()}},{key:"render",value:function(){var e=this;return Object(l.jsxs)("div",{children:[Object(l.jsxs)(f.a,{children:[Object(l.jsx)("nav",{children:Object(l.jsxs)("ul",{children:[Object(l.jsx)("li",{children:Object(l.jsx)(f.b,{to:"/",children:"Users"})}),Object(l.jsx)("li",{children:Object(l.jsx)(f.b,{to:"/projects",children:"Projects"})}),Object(l.jsx)("li",{children:Object(l.jsx)(f.b,{to:"/todos",children:"Todos"})}),Object(l.jsx)("li",{children:this.is_auth()?Object(l.jsx)("button",{onClick:function(){return e.logout()},children:"Logout"}):Object(l.jsx)(f.b,{to:"/login",children:"Login"})})]})}),Object(l.jsxs)(m.c,{children:[Object(l.jsx)(m.a,{exact:!0,path:"/",component:function(){return Object(l.jsx)(d,{users:e.state.users})}}),Object(l.jsx)(m.a,{exact:!0,path:"/projects",component:function(){return Object(l.jsx)(v,{projects:e.state.projects,deleteProjects:function(t){return e.deleteProjects(t)}})}}),Object(l.jsx)(m.a,{exact:!0,path:"/projects/create",component:function(){return Object(l.jsx)(P,{createProject:function(t,n){return e.createProject(t,n)},users:e.state.users})}}),Object(l.jsx)(m.a,{exact:!0,path:"/todo/create",component:function(){return Object(l.jsx)(T,{createTodo:function(t,n,c){return e.createTodo(t,n,c)},users:e.state.users,projects:e.state.projects})}}),Object(l.jsx)(m.a,{exact:!0,path:"/todos",component:function(){return Object(l.jsx)(y,{todos:e.state.todos,deleteTodo:function(t){return e.deleteTodo(t)}})}}),Object(l.jsx)(m.a,{exact:!0,path:"/login",component:function(){return Object(l.jsx)(C,{get_token:function(t,n){return e.get_token(t,n)}})}}),Object(l.jsx)(m.a,{component:S})]})]}),Object(l.jsx)(x,{})]})}}]),n}(r.a.Component),w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,o=t.getTTFB;n(e),c(e),r(e),s(e),o(e)}))};o.a.render(Object(l.jsx)(r.a.StrictMode,{children:Object(l.jsx)(N,{})}),document.getElementById("root")),w()}},[[69,1,2]]]);
//# sourceMappingURL=main.75d2f59a.chunk.js.map